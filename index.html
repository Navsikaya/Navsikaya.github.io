<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="css/style.css">


    <title>SoulMate</title>
  </head>
  <body>

  <div id="main">
    <h1 class="Title_Curs">Покупка курса</h1>
      <img class="image1" src="https://aisschool.ru/pluginfile.php/13447/course/overviewfiles/%D0%A8%D0%B0%D0%BF%D0%BE%D0%B2%D0%B0%D0%BB%D0%BE%D0%B2%D0%B0.png" width="100px" height="100px">
      <p class="about">НАШ НОВЫЙ КУРС!!!</p>
      <button id="buy">Купить</button>
  </div>
  <form id="form">
    <label class="Text_form" for="name">Имя:</label>
    <input type="text" id="name" name="name" required>

    <label for="surname">Фамилия:</label>
    <input class="Text_form" type="text" id="surname" name="surname" required>

    <label for="email">Почта:</label>
    <input class="Text_form" type="email" id="email" name="email" required>

    <label for="phone">Номер телефона:</label>
    <input  class="Text_form" type="tel" id="phone" name="phone" required>

    <button id="order" >Оформить</button>
  </form>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<script>
    let tg = window.Telegram.WebApp;
    let buy = document.getElementById("buy")
    let order = document.getElementById("order")
    tg.expand();

    buy.addEventListener("click",()=>{
        document.getElementById("main").style.display="none";
        document.getElementById("form").style.display="block";
        document.getElementById("name").value=tg.initDataUnsafe.user.first_name;
        document.getElementById("surname").value= tg.initDataUnsafe.user.last_name;
    });

    order.addEventListener("click",()=>{

        let name = document.getElementById("name").value;
        let surname = document.getElementById("surname").value;
        let email = document.getElementById("email").value;
        let phone = document.getElementById("phone").value;

        let data ={
          name:name,
          surname: surname,
          email: email,
          phone: phone
        }


        tg.sendData(JSON.stringify(data))


        tg.close();
    });
</script>
  </body>
</html>